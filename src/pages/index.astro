---
import Layout from '../layouts/Layout.astro';
export const prerender = false;
import { Map, BaggageClaim, Wallet } from 'lucide-react';

// import TestimonialCard from '../components/TestimonialCard'; // unused on current landing
import { getDictionary } from '../lib/i18n';

const lang = Astro.locals.lang;
const dict = getDictionary(lang);

function switchUrl(target: string) {
  const url = new URL(Astro.request.url);
  url.searchParams.set('lang', target);
  return url.pathname + '?' + url.searchParams.toString();
}
---

<Layout title={dict.homepage?.titleTagline || dict.hero.heading}>
  <main class="relative min-h-screen flex flex-col overflow-hidden bg-slate-950 text-slate-50">
    <!-- Decorative gradients -->
    <div aria-hidden="true" class="pointer-events-none absolute inset-0">
      <div class="absolute -top-40 -left-40 h-96 w-96 rounded-full bg-indigo-600/20 blur-3xl"></div>
      <div class="absolute top-1/2 -right-40 h-96 w-96 rounded-full bg-fuchsia-600/20 blur-3xl"></div>
    </div>

    <!-- Top bar -->
    <header class="absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-6 py-5">
      <div class="flex items-center gap-3">
        <img src="/Logo_TripCrafti.png" alt={dict.homepage?.brandAlt} class="h-10" />
        <h1 class="text-xl font-semibold tracking-tight">{dict.homepage?.brandName}</h1>
      </div>
      <nav aria-label="Primary" class="flex items-center gap-3">
        <div class="flex items-center gap-1" aria-label={dict.langSwitcher.label}>
          <a
            href={switchUrl('pl')}
            lang="pl"
            hreflang="pl"
            class={`inline-flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium border transition ${lang === 'pl' ? 'border-indigo-400/60 text-white bg-slate-800/60' : 'border-slate-700/70 text-slate-300 hover:text-white hover:border-indigo-400/50'}`}
            >ðŸ‡µðŸ‡± <span class="hidden sm:inline">PL</span></a
          >
          <a
            href={switchUrl('en')}
            lang="en"
            hreflang="en"
            class={`inline-flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium border transition ${lang === 'en' ? 'border-indigo-400/60 text-white bg-slate-800/60' : 'border-slate-700/70 text-slate-300 hover:text-white hover:border-indigo-400/50'}`}
            >ðŸ‡¬ðŸ‡§ <span class="hidden sm:inline">EN</span></a
          >
        </div>
        <a
          href="/login"
          class="group relative inline-flex items-center gap-2 rounded-lg border border-slate-700/70 bg-slate-800/40 px-5 py-2.5 text-sm font-medium text-slate-100 backdrop-blur transition hover:border-indigo-400/60 hover:bg-slate-800/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/70 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
        >
          <span class="relative z-10">{dict.hero.cta}</span>
          <span
            class="absolute inset-0 rounded-lg bg-gradient-to-r from-indigo-500/0 via-indigo-500/0 to-indigo-500/0 opacity-0 transition group-hover:opacity-30"
          ></span>
        </a>
      </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section relative z-10 flex h-screen flex-col items-center justify-center px-6 text-center">
      <div class="mx-auto max-w-5xl">
        <p
          class="inline-flex items-center gap-2 rounded-full border border-slate-700/60 bg-slate-800/40 px-4 py-1.5 text-[11px] font-medium uppercase tracking-wider text-slate-300/80 backdrop-blur"
        >
          <span class="h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-400 to-fuchsia-400 animate-pulse"></span>
          {dict.hero.badge}
        </p>
        <h2
          class="mt-6 bg-gradient-to-br from-indigo-200 via-sky-200 to-fuchsia-200 bg-clip-text text-4xl font-bold leading-tight text-transparent md:text-5xl lg:text-6xl"
        >
          {dict.hero.heading}
        </h2>
        <p class="mx-auto mt-6 max-w-3xl text-lg leading-relaxed text-slate-200 md:text-xl">
          {dict.hero.sub}
        </p>
        {dict.hero.pitch && <p class="mx-auto mt-4 max-w-3xl text-base md:text-lg text-slate-300">{dict.hero.pitch}</p>}
        <!-- Multi-action onboarding CTA buttons -->
        {
          dict.homepageActions && (
            <div class="mt-8 flex flex-wrap justify-center gap-3" aria-label="Primary onboarding actions">
              <a
                href="/login"
                class="inline-flex items-center gap-2 rounded-md bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-action="create-account"
              >
                {dict.homepageActions.createAccount}
              </a>
              <a
                href="/login"
                class="inline-flex items-center gap-2 rounded-md bg-slate-800/70 px-5 py-2.5 text-sm font-medium text-slate-100 border border-slate-700 hover:border-indigo-400/60 hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-action="create-trip"
              >
                {dict.homepageActions.createTrip}
              </a>
              <a
                href="/login"
                class="inline-flex items-center gap-2 rounded-md bg-slate-800/70 px-5 py-2.5 text-sm font-medium text-slate-100 border border-slate-700 hover:border-fuchsia-400/60 hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-action="set-budget"
              >
                {dict.homepageActions.setBudget}
              </a>
              <a
                href="/login"
                class="inline-flex items-center gap-2 rounded-md bg-slate-800/70 px-5 py-2.5 text-sm font-medium text-slate-100 border border-slate-700 hover:border-sky-400/60 hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-action="generate-plan"
              >
                {dict.homepageActions.generatePlan}
              </a>
              <a
                href="/login"
                class="inline-flex items-center gap-2 rounded-md bg-slate-800/70 px-5 py-2.5 text-sm font-medium text-slate-100 border border-slate-700 hover:border-emerald-400/60 hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
                data-action="generate-packing-list"
              >
                {dict.homepageActions.buildPackingList}
              </a>
            </div>
          )
        }
      </div>
    </section>

    <!-- Section 2 -->
    <section class="relative z-10 flex flex-col items-center px-6 py-16 sm:py-20 bg-slate-950">
      <div class="mx-auto max-w-4xl text-center">
        <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">{dict.section2.heading}</h2>
        <p class="mt-6 text-lg leading-8 text-slate-300">
          {dict.section2.body}
        </p>
      </div>
    </section>

    <!-- Features Section -->
    <section class="relative z-10 flex flex-col items-center px-6 py-16 sm:py-20">
      <div class="mx-auto max-w-7xl">
        <div class="grid grid-cols-1 gap-x-12 gap-y-16 lg:grid-cols-3">
          <!-- Feature 1 -->
          <div class="flex flex-col items-center text-center">
            <Map className="mb-4 text-white" size={48} />
            <h3 class="text-2xl font-bold tracking-tight text-white">
              {dict.detailedFeatures.feature1.headline}
            </h3>
            <p class="mt-4 text-base leading-7 text-slate-300">
              {dict.detailedFeatures.feature1.body}
            </p>
          </div>
          <!-- Feature 2 -->
          <div class="flex flex-col items-center text-center">
            <BaggageClaim className="mb-4 text-white" size={48} />
            <h3 class="text-2xl font-bold tracking-tight text-white">
              {dict.detailedFeatures.feature2.headline}
            </h3>
            <p class="mt-4 text-base leading-7 text-slate-300">
              {dict.detailedFeatures.feature2.body}
            </p>
          </div>
          <!-- Feature 3 -->
          <div class="flex flex-col items-center text-center">
            <Wallet className="mb-4 text-white" size={48} />
            <h3 class="text-2xl font-bold tracking-tight text-white">{dict.detailedFeatures.feature3.headline}</h3>
            <p class="mt-4 text-base leading-7 text-slate-300">
              {dict.detailedFeatures.feature3.body}
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="relative z-10 flex flex-col items-center px-6 py-16 sm:py-24 bg-slate-950">
      <div class="mx-auto max-w-4xl text-center">
        <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">{dict.cta.headline}</h2>
        <p class="mt-6 text-lg leading-8 text-slate-300">
          {dict.cta.body}
        </p>
        <div class="mt-10 flex items-center justify-center gap-x-6">
          <a
            href="/login"
            class="group relative inline-flex items-center gap-2 rounded-xl bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-sky-500 px-8 py-4 text-sm font-semibold tracking-wide text-white shadow-lg shadow-indigo-900/40 transition hover:scale-[1.02] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
          >
            <span>{dict.hero.cta}</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="h-4 w-4 transition group-hover:translate-x-1"
              aria-hidden="true"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg
            >
          </a>
        </div>
      </div>
    </section>

    <footer class="relative z-10 px-6 py-8 text-center text-xs text-slate-500/80 bg-slate-950">
      <p>{dict.footer.copyright}</p>
    </footer>
  </main>
</Layout>

<style>
  .hero-section {
    background-image: linear-gradient(rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.95)), url('/Banner_TripCrafti.png');
    background-size: cover;
    background-position: center;
  }
  @keyframes scrollY {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-50%);
    }
  }
  .feature-roller:hover {
    animation-play-state: paused;
  }

  @media (prefers-reduced-motion: reduce) {
    .feature-roller {
      animation-play-state: paused;
      /* Or animation: none; to disable it completely */
    }
  }
</style>

---
import Layout from '../../../layouts/Layout.astro';

import PackingAssistant from '@/components/PackingAssistant';
import { getDictionary } from '@/lib/i18n';
export const prerender = false;

// Temporary cast because Locals interface may not declare lang
const lang = (Astro.locals as any).lang;
const dict = getDictionary(lang);
const { id } = Astro.params; // trip id
---

<Layout title={(lang === 'pl' ? 'Pakowanie' : 'Packing') + ' – TripCrafti'}>
  <main class="min-h-screen flex flex-col bg-slate-950 text-slate-50">
    <header
      class="flex items-center gap-3 px-4 sm:px-6 py-4 border-b border-slate-800/60 sticky top-0 bg-slate-950/80 backdrop-blur-sm z-20"
    >
      <a
        href={`/app?lang=${lang}`}
        class="inline-flex items-center gap-2 text-slate-300 hover:text-white text-sm font-medium"
      >
        <span class="w-7 h-7 rounded-md bg-slate-800 flex items-center justify-center">←</span>
        <span>{lang === 'pl' ? 'Powrót' : 'Back'}</span>
      </a>
      <div class="flex items-center gap-2 ml-auto">
        <span class="text-xs uppercase tracking-wide text-slate-400">{dict.dashboard?.tabs?.packing}</span>
      </div>
    </header>
    <div class="flex-1 w-full mx-auto max-w-[1600px] px-2 sm:px-4 md:px-6 py-3 md:py-6">
      <PackingAssistant tripId={id!} lang={lang} client:load />
    </div>
    <footer class="px-6 py-8 text-center text-xs text-slate-500/80 border-t border-slate-800/60">
      <p>{dict.footer.copyright}</p>
    </footer>
  </main>
</Layout>
